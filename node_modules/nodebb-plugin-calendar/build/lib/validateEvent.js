'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
const isArrayOf = (arr, type) => {
  if (!Array.isArray(arr)) {
    return false;
  }
  for (const x of arr) {
    if (typeof x !== type) {
      return false;
    }
  }
  return true;
};

const checkDate = val => typeof val === 'number' && new Date(val).getTime() === val;

const fields = {
  name: val => typeof val === 'string' && val.length > 5,
  allday: val => typeof val === 'boolean',
  startDate: checkDate,
  endDate: checkDate,
  reminders: val => isArrayOf(val, 'number'),
  location: val => typeof val === 'string' && !val.includes('\n'),
  description: val => typeof val === 'string'
};

const validateEvent = event => {
  let failures = [];

  for (const key of Object.keys(fields)) {
    if (!fields[key](event[key])) {
      failures.push(key);
    }
  }
  if (event.startDate > event.endDate) {
    failures.push('startDate', 'endDate');
  }

  // make array unique
  failures = failures.filter((x, i) => failures.indexOf(x) === i);

  return [!!failures.length, failures];
};

exports.default = validateEvent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvdmFsaWRhdGVFdmVudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE1BQU0sWUFBWSxDQUFDLEdBQUQsRUFBTSxJQUFOLEtBQWU7QUFDL0IsTUFBSSxDQUFDLE1BQU0sT0FBTixDQUFjLEdBQWQsQ0FBTCxFQUF5QjtBQUN2QixXQUFPLEtBQVA7QUFDRDtBQUNELE9BQUssTUFBTSxDQUFYLElBQWdCLEdBQWhCLEVBQXFCO0FBQ25CLFFBQUksT0FBTyxDQUFQLEtBQWEsSUFBakIsRUFBdUI7QUFDckIsYUFBTyxLQUFQO0FBQ0Q7QUFDRjtBQUNELFNBQU8sSUFBUDtBQUNELENBVkQ7O0FBWUEsTUFBTSxZQUFZLE9BQU8sT0FBTyxHQUFQLEtBQWUsUUFBZixJQUEyQixJQUFJLElBQUosQ0FBUyxHQUFULEVBQWMsT0FBZCxPQUE0QixHQUFoRjs7QUFFQSxNQUFNLFNBQVM7QUFDYixRQUFNLE9BQU8sT0FBTyxHQUFQLEtBQWUsUUFBZixJQUE0QixJQUFJLE1BQUosR0FBYSxDQUR6QztBQUViLFVBQVEsT0FBTyxPQUFPLEdBQVAsS0FBZSxTQUZqQjtBQUdiLGFBQVcsU0FIRTtBQUliLFdBQVMsU0FKSTtBQUtiLGFBQVcsT0FBTyxVQUFVLEdBQVYsRUFBZSxRQUFmLENBTEw7QUFNYixZQUFVLE9BQU8sT0FBTyxHQUFQLEtBQWUsUUFBZixJQUEyQixDQUFDLElBQUksUUFBSixDQUFhLElBQWIsQ0FOaEM7QUFPYixlQUFhLE9BQU8sT0FBTyxHQUFQLEtBQWU7QUFQdEIsQ0FBZjs7QUFVQSxNQUFNLGdCQUFnQixTQUFTO0FBQzdCLE1BQUksV0FBVyxFQUFmOztBQUVBLE9BQUssTUFBTSxHQUFYLElBQWtCLE9BQU8sSUFBUCxDQUFZLE1BQVosQ0FBbEIsRUFBdUM7QUFDckMsUUFBSSxDQUFDLE9BQU8sR0FBUCxFQUFZLE1BQU0sR0FBTixDQUFaLENBQUwsRUFBOEI7QUFDNUIsZUFBUyxJQUFULENBQWMsR0FBZDtBQUNEO0FBQ0Y7QUFDRCxNQUFJLE1BQU0sU0FBTixHQUFrQixNQUFNLE9BQTVCLEVBQXFDO0FBQ25DLGFBQVMsSUFBVCxDQUFjLFdBQWQsRUFBMkIsU0FBM0I7QUFDRDs7O0FBR0QsYUFBVyxTQUFTLE1BQVQsQ0FBZ0IsQ0FBQyxDQUFELEVBQUksQ0FBSixLQUFVLFNBQVMsT0FBVCxDQUFpQixDQUFqQixNQUF3QixDQUFsRCxDQUFYOztBQUVBLFNBQU8sQ0FBQyxDQUFDLENBQUMsU0FBUyxNQUFaLEVBQW9CLFFBQXBCLENBQVA7QUFDRCxDQWhCRDs7a0JBa0JlLGEiLCJmaWxlIjoidmFsaWRhdGVFdmVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGlzQXJyYXlPZiA9IChhcnIsIHR5cGUpID0+IHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGFycikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yIChjb25zdCB4IG9mIGFycikge1xuICAgIGlmICh0eXBlb2YgeCAhPT0gdHlwZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmNvbnN0IGNoZWNrRGF0ZSA9IHZhbCA9PiB0eXBlb2YgdmFsID09PSAnbnVtYmVyJyAmJiBuZXcgRGF0ZSh2YWwpLmdldFRpbWUoKSA9PT0gdmFsO1xuXG5jb25zdCBmaWVsZHMgPSB7XG4gIG5hbWU6IHZhbCA9PiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyAmJiAodmFsLmxlbmd0aCA+IDUpLFxuICBhbGxkYXk6IHZhbCA9PiB0eXBlb2YgdmFsID09PSAnYm9vbGVhbicsXG4gIHN0YXJ0RGF0ZTogY2hlY2tEYXRlLFxuICBlbmREYXRlOiBjaGVja0RhdGUsXG4gIHJlbWluZGVyczogdmFsID0+IGlzQXJyYXlPZih2YWwsICdudW1iZXInKSxcbiAgbG9jYXRpb246IHZhbCA9PiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyAmJiAhdmFsLmluY2x1ZGVzKCdcXG4nKSxcbiAgZGVzY3JpcHRpb246IHZhbCA9PiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyxcbn07XG5cbmNvbnN0IHZhbGlkYXRlRXZlbnQgPSBldmVudCA9PiB7XG4gIGxldCBmYWlsdXJlcyA9IFtdO1xuXG4gIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGZpZWxkcykpIHtcbiAgICBpZiAoIWZpZWxkc1trZXldKGV2ZW50W2tleV0pKSB7XG4gICAgICBmYWlsdXJlcy5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIGlmIChldmVudC5zdGFydERhdGUgPiBldmVudC5lbmREYXRlKSB7XG4gICAgZmFpbHVyZXMucHVzaCgnc3RhcnREYXRlJywgJ2VuZERhdGUnKTtcbiAgfVxuXG4gIC8vIG1ha2UgYXJyYXkgdW5pcXVlXG4gIGZhaWx1cmVzID0gZmFpbHVyZXMuZmlsdGVyKCh4LCBpKSA9PiBmYWlsdXJlcy5pbmRleE9mKHgpID09PSBpKTtcblxuICByZXR1cm4gWyEhZmFpbHVyZXMubGVuZ3RoLCBmYWlsdXJlc107XG59O1xuXG5leHBvcnQgZGVmYXVsdCB2YWxpZGF0ZUV2ZW50O1xuIl19