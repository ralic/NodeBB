'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _moment = require('moment');

var _moment2 = _interopRequireDefault(_moment);

var _intl = require('intl');

var _intl2 = _interopRequireDefault(_intl);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

Intl.NumberFormat = _intl2.default.NumberFormat;
Intl.DateTimeFormat = _intl2.default.DateTimeFormat;

const stringOptions = {
  date: {
    weekday: 'long',
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  },
  time: {
    hour: 'numeric',
    minute: 'numeric'
  },
  full: {}
};

stringOptions.full = _extends({}, stringOptions.date, stringOptions.time);

stringOptions.UTC = Object.keys(stringOptions).reduce((utc, key) => _extends({}, utc, {
  [key]: _extends({}, stringOptions[key], {
    timeZone: 'UTC',
    timeZoneName: 'short'
  })
}), {});

const formatDates = (s, e, allday, lang, utc) => {
  const start = new Date(s);
  const end = new Date(e);

  const options = utc ? stringOptions.UTC : stringOptions;

  if (Math.abs(s - e) <= 60 * 1000) {
    if (allday) {
      return start.toLocaleDateString(lang, options.date);
    }
    return start.toLocaleString(lang, options.full);
  }

  if (start.getDate() === end.getDate() && start.getMonth() === end.getMonth() && start.getYear() === end.getYear()) {
    if (allday) {
      return start.toLocaleDateString(lang, options.date);
    }
    return `${ start.toLocaleDateString(lang, options.date) }<br>` + `${ start.toLocaleTimeString(lang, options.time) }` + ` - ${ end.toLocaleTimeString(lang, options.time) }`;
  }

  if (allday) {
    return `${ start.toLocaleDateString(lang, options.date) }` + ` - ${ end.toLocaleDateString(lang, options.date) }`;
  }
  return `${ start.toLocaleString(lang, options.full) } - ` + `${ end.toLocaleString(lang, options.full) }`;
};

const zero = (0, _moment2.default)(0);

const makeListElement = n => {
  const li = `<li data-value="${ n }">${ zero.to(n, true) }</li>`;
  return li;
};

const postTemplate = (event, lang) => {
  // const dateString = formatDates(
  //   event.startDate,
  //   event.endDate,
  //   event.allday,
  //   lang
  // );
  const dateStringUTC = formatDates(event.startDate, event.endDate, event.allday, lang, true).replace('<br>', ' | ');

  const responsesTemplate = `
<div class="plugin-calendar-event-responses">
  <i class="fa fa-reply" aria-hidden="true"></i>
  <div>
    <div class="plugin-calendar-event-responses-user btn-group">
      <button data-value="no" type="button" class="btn btn-sm btn-danger">
        [[calendar:response_no]]
      </button>
      <button data-value="maybe" type="button" class="btn btn-sm btn-default">
        [[calendar:response_maybe]]
      </button>
      <button data-value="yes" type="button" class="btn btn-sm btn-success">
        [[calendar:response_yes]]
      </button>
    </div>
    <div class="panel-group plugin-calendar-event-responses-lists" data-loaded="false">
      <div class="panel panel-default closed">
        <div class="panel-heading">
          <a role="button" data-toggle="collapse" href="#"
          class="btn btn-sm btn-info" aria-expanded="true">
            [[calendar:response_yes]]
            <i class="fa fa-chevron-down pull-right"></i>
          </a>
        </div>
        <div class="panel-collapse">
          <div class="panel-body">
            <ul class="plugin-calendar-event-responses-list-yes">
              <!-- yes responses go here -->
            </ul>
          </div>
        </div>
      </div>
      <div class="panel panel-default closed">
        <div class="panel-heading">
          <a role="button" data-toggle="collapse" href="#"
          class="btn btn-sm btn-link" aria-expanded="true">
            [[calendar:response_maybe]]
            <i class="fa fa-chevron-down pull-right"></i>
          </a>
        </div>
        <div class="panel-collapse">
          <div class="panel-body">
            <ul class="plugin-calendar-event-responses-list-maybe">
              <!-- maybe responses go here -->
            </ul>
          </div>
        </div>
      </div>
      <div class="panel panel-default closed">
        <div class="panel-heading">
          <a role="button" data-toggle="collapse" href="#"
          class="btn btn-sm btn-warning" aria-expanded="true">
            [[calendar:response_no]]
            <i class="fa fa-chevron-down pull-right"></i>
          </a>
        </div>
        <div class="panel-collapse">
          <div class="panel-body">
            <ul class="plugin-calendar-event-responses-list-no">
              <!-- no responses go here -->
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>`;

  const html = `
<div class="plugin-calendar-event panel panel-success">
  <div class="plugin-calendar-event-name panel-heading">
    ${ event.name }
  </div>
  <div class="panel-body">
    <div class="plugin-calendar-event-date">
      <i class="fa fa-clock-o" aria-hidden="true"></i>
      <a
        data-parsed="false"
        data-allday="${ event.allday }"
        data-startDate="${ event.startDate }"
        data-endDate="${ event.endDate }"
        title="${ dateStringUTC }"
        data-original-title="${ dateStringUTC }"
        class="plugin-calendar-time-date-view"
      >Hover for UTC date</a>
    </div>
    ${ event.location.length ? `
    <div class="plugin-calendar-event-location">
      <i class="fa fa-location-arrow" aria-hidden="true"></i>
      <span>${ event.location }<span>
    </div>
    ` : '' }
    ${ event.description.length ? `
    <div class="plugin-calendar-event-description">
      <i class="fa fa-info-circle" aria-hidden="true"></i>
      <div>${ event.description }</div>
    </div>
    ` : '' }
    ${ event.reminders.length ? `
    <div class="plugin-calendar-event-reminders">
      <i class="fa fa-bell" aria-hidden="true"></i>
      <ul>
        ${ event.reminders.sort((a, b) => a - b).map(makeListElement).join('\n') }
      </ul>
    </div>
    ` : '' }
    ${ responsesTemplate }
  </div>
</div>`.trim();

  return html;
};

exports.default = postTemplate;
// export { formatDates };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvdGVtcGxhdGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7Ozs7QUFDQSxLQUFLLFlBQUwsR0FBb0IsZUFBYSxZQUFqQztBQUNBLEtBQUssY0FBTCxHQUFzQixlQUFhLGNBQW5DOztBQUVBLE1BQU0sZ0JBQWdCO0FBQ3BCLFFBQU07QUFDSixhQUFTLE1BREw7QUFFSixVQUFNLFNBRkY7QUFHSixXQUFPLE1BSEg7QUFJSixTQUFLO0FBSkQsR0FEYztBQU9wQixRQUFNO0FBQ0osVUFBTSxTQURGO0FBRUosWUFBUTtBQUZKLEdBUGM7QUFXcEIsUUFBTTtBQVhjLENBQXRCOztBQWNBLGNBQWMsSUFBZCxnQkFDSyxjQUFjLElBRG5CLEVBRUssY0FBYyxJQUZuQjs7QUFLQSxjQUFjLEdBQWQsR0FBb0IsT0FBTyxJQUFQLENBQVksYUFBWixFQUEyQixNQUEzQixDQUFrQyxDQUFDLEdBQUQsRUFBTSxHQUFOLGtCQUNqRCxHQURpRDtBQUVwRCxHQUFDLEdBQUQsZ0JBQ0ssY0FBYyxHQUFkLENBREw7QUFFRSxjQUFVLEtBRlo7QUFHRSxrQkFBYztBQUhoQjtBQUZvRCxFQUFsQyxFQU9oQixFQVBnQixDQUFwQjs7QUFTQSxNQUFNLGNBQWMsQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLE1BQVAsRUFBZSxJQUFmLEVBQXFCLEdBQXJCLEtBQTZCO0FBQy9DLFFBQU0sUUFBUSxJQUFJLElBQUosQ0FBUyxDQUFULENBQWQ7QUFDQSxRQUFNLE1BQU0sSUFBSSxJQUFKLENBQVMsQ0FBVCxDQUFaOztBQUVBLFFBQU0sVUFBVSxNQUFNLGNBQWMsR0FBcEIsR0FBMEIsYUFBMUM7O0FBRUEsTUFBSSxLQUFLLEdBQUwsQ0FBUyxJQUFJLENBQWIsS0FBbUIsS0FBSyxJQUE1QixFQUFrQztBQUNoQyxRQUFJLE1BQUosRUFBWTtBQUNWLGFBQU8sTUFBTSxrQkFBTixDQUF5QixJQUF6QixFQUErQixRQUFRLElBQXZDLENB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bW9tZW50JztcbmltcG9ydCBJbnRsUG9seWZpbGwgZnJvbSAnaW50bCc7XG5JbnRsLk51bWJlckZvcm1hdCA9IEludGxQb2x5ZmlsbC5OdW1iZXJGb3JtYXQ7XG5JbnRsLkRhdGVUaW1lRm9ybWF0ID0gSW50bFBvbHlmaWxsLkRhdGVUaW1lRm9ybWF0O1xuXG5jb25zdCBzdHJpbmdPcHRpb25zID0ge1xuICBkYXRlOiB7XG4gICAgd2Vla2RheTogJ2xvbmcnLFxuICAgIHllYXI6ICdudW1lcmljJyxcbiAgICBtb250aDogJ2xvbmcnLFxuICAgIGRheTogJ251bWVyaWMnLFxuICB9LFxuICB0aW1lOiB7XG4gICAgaG91cjogJ251bWVyaWMnLFxuICAgIG1pbnV0ZTogJ251bWVyaWMnLFxuICB9LFxuICBmdWxsOiB7fSxcbn07XG5cbnN0cmluZ09wdGlvbnMuZnVsbCA9IHtcbiAgLi4uc3RyaW5nT3B0aW9ucy5kYXRlLFxuICAuLi5zdHJpbmdPcHRpb25zLnRpbWUsXG59O1xuXG5zdHJpbmdPcHRpb25zLlVUQyA9IE9iamVjdC5rZXlzKHN0cmluZ09wdGlvbnMpLnJlZHVjZSgodXRjLCBrZXkpID0+ICh7XG4gIC4uLnV0YyxcbiAgW2tleV06IHtcbiAgICAuLi5zdHJpbmdPcHRpb25zW2tleV0sXG4gICAgdGltZVpvbmU6ICdVVEMnLFxuICAgIHRpbWVab25lTmFtZTogJ3Nob3J0JyxcbiAgfSxcbn0pLCB7fSk7XG5cbmNvbnN0IGZvcm1hdERhdGVzID0gKHMsIGUsIGFsbGRheSwgbGFuZywgdXRjKSA9PiB7XG4gIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUocyk7XG4gIGNvbnN0IGVuZCA9IG5ldyBEYXRlKGUpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSB1dGMgPyBzdHJpbmdPcHRpb25zLlVUQyA6IHN0cmluZ09wdGlvbnM7XG5cbiAgaWYgKE1hdGguYWJzKHMgLSBlKSA8PSA2MCAqIDEwMDApIHtcbiAgICBpZiAoYWxsZGF5KSB7XG4gICAgICByZXR1cm4gc3RhcnQudG9Mb2NhbGVEYXRlU3RyaW5nKGxhbmcsIG9wdGlvbnMuZGF0ZSk7XG4gICAgfVxuICAgIHJldHVybiBzdGFydC50b0xvY2FsZVN0cmluZyhsYW5nLCBvcHRpb25zLmZ1bGwpO1xuICB9XG5cbiAgaWYgKFxuICAgIHN0YXJ0LmdldERhdGUoKSA9PT0gZW5kLmdldERhdGUoKSAmJlxuICAgIHN0YXJ0LmdldE1vbnRoKCkgPT09IGVuZC5nZXRNb250aCgpICYmXG4gICAgc3RhcnQuZ2V0WWVhcigpID09PSBlbmQuZ2V0WWVhcigpXG4gICkge1xuICAgIGlmIChhbGxkYXkpIHtcbiAgICAgIHJldHVybiBzdGFydC50b0xvY2FsZURhdGVTdHJpbmcobGFuZywgb3B0aW9ucy5kYXRlKTtcbiAgICB9XG4gICAgcmV0dXJuIGAke3N0YXJ0LnRvTG9jYWxlRGF0ZVN0cmluZyhsYW5nLCBvcHRpb25zLmRhdGUpfTxicj5gICtcbiAgICAgIGAke3N0YXJ0LnRvTG9jYWxlVGltZVN0cmluZyhsYW5nLCBvcHRpb25zLnRpbWUpfWAgK1xuICAgICAgYCAtICR7ZW5kLnRvTG9jYWxlVGltZVN0cmluZyhsYW5nLCBvcHRpb25zLnRpbWUpfWA7XG4gIH1cblxuICBpZiAoYWxsZGF5KSB7XG4gICAgcmV0dXJuIGAke3N0YXJ0LnRvTG9jYWxlRGF0ZVN0cmluZyhsYW5nLCBvcHRpb25zLmRhdGUpfWAgK1xuICAgICAgYCAtICR7ZW5kLnRvTG9jYWxlRGF0ZVN0cmluZyhsYW5nLCBvcHRpb25zLmRhdGUpfWA7XG4gIH1cbiAgcmV0dXJuIGAke3N0YXJ0LnRvTG9jYWxlU3RyaW5nKGxhbmcsIG9wdGlvbnMuZnVsbCl9IC0gYCArXG4gICAgYCR7ZW5kLnRvTG9jYWxlU3RyaW5nKGxhbmcsIG9wdGlvbnMuZnVsbCl9YDtcbn07XG5cbmNvbnN0IHplcm8gPSBtb21lbnQoMCk7XG5cbmNvbnN0IG1ha2VMaXN0RWxlbWVudCA9IG4gPT4ge1xuICBjb25zdCBsaSA9IGA8bGkgZGF0YS12YWx1ZT1cIiR7bn1cIj4ke3plcm8udG8obiwgdHJ1ZSl9PC9saT5gO1xuICByZXR1cm4gbGk7XG59O1xuXG5jb25zdCBwb3N0VGVtcGxhdGUgPSAoZXZlbnQsIGxhbmcpID0+IHtcbiAgLy8gY29uc3QgZGF0ZVN0cmluZyA9IGZvcm1hdERhdGVzKFxuICAvLyAgIGV2ZW50LnN0YXJ0RGF0ZSxcbiAgLy8gICBldmVudC5lbmREYXRlLFxuICAvLyAgIGV2ZW50LmFsbGRheSxcbiAgLy8gICBsYW5nXG4gIC8vICk7XG4gIGNvbnN0IGRhdGVTdHJpbmdVVEMgPSBmb3JtYXREYXRlcyhcbiAgICBldmVudC5zdGFydERhdGUsXG4gICAgZXZlbnQuZW5kRGF0ZSxcbiAgICBldmVudC5hbGxkYXksXG4gICAgbGFuZyxcbiAgICB0cnVlXG4gICkucmVwbGFjZSgnPGJyPicsICcgfCAnKTtcblxuICBjb25zdCByZXNwb25zZXNUZW1wbGF0ZSA9IGBcbjxkaXYgY2xhc3M9XCJwbHVnaW4tY2FsZW5kYXItZXZlbnQtcmVzcG9uc2VzXCI+XG4gIDxpIGNsYXNzPVwiZmEgZmEtcmVwbHlcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG4gIDxkaXY+XG4gICAgPGRpdiBjbGFzcz1cInBsdWdpbi1jYWxlbmRhci1ldmVudC1yZXNwb25zZXMtdXNlciBidG4tZ3JvdXBcIj5cbiAgICAgIDxidXR0b24gZGF0YS12YWx1ZT1cIm5vXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tZGFuZ2VyXCI+XG4gICAgICAgIFtbY2FsZW5kYXI6cmVzcG9uc2Vfbm9dXVxuICAgICAgPC9idXR0b24+XG4gICAgICA8YnV0dG9uIGRhdGEtdmFsdWU9XCJtYXliZVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIj5cbiAgICAgICAgW1tjYWxlbmRhcjpyZXNwb25zZV9tYXliZV1dXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxidXR0b24gZGF0YS12YWx1ZT1cInllc1wiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc20gYnRuLXN1Y2Nlc3NcIj5cbiAgICAgICAgW1tjYWxlbmRhcjpyZXNwb25zZV95ZXNdXVxuICAgICAgPC9idXR0b24+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cInBhbmVsLWdyb3VwIHBsdWdpbi1jYWxlbmRhci1ldmVudC1yZXNwb25zZXMtbGlzdHNcIiBkYXRhLWxvYWRlZD1cImZhbHNlXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwicGFuZWwgcGFuZWwtZGVmYXVsdCBjbG9zZWRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsLWhlYWRpbmdcIj5cbiAgICAgICAgICA8YSByb2xlPVwiYnV0dG9uXCIgZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiIGhyZWY9XCIjXCJcbiAgICAgICAgICBjbGFzcz1cImJ0biBidG4tc20gYnRuLWluZm9cIiBhcmlhLWV4cGFuZGVkPVwidHJ1ZVwiPlxuICAgICAgICAgICAgW1tjYWxlbmRhcjpyZXNwb25zZV95ZXNdXVxuICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1jaGV2cm9uLWRvd24gcHVsbC1yaWdodFwiPjwvaT5cbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWwtY29sbGFwc2VcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWwtYm9keVwiPlxuICAgICAgICAgICAgPHVsIGNsYXNzPVwicGx1Z2luLWNhbGVuZGFyLWV2ZW50LXJlc3BvbnNlcy1saXN0LXllc1wiPlxuICAgICAgICAgICAgICA8IS0tIHllcyByZXNwb25zZXMgZ28gaGVyZSAtLT5cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwicGFuZWwgcGFuZWwtZGVmYXVsdCBjbG9zZWRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsLWhlYWRpbmdcIj5cbiAgICAgICAgICA8YSByb2xlPVwiYnV0dG9uXCIgZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiIGhyZWY9XCIjXCJcbiAgICAgICAgICBjbGFzcz1cImJ0biBidG4tc20gYnRuLWxpbmtcIiBhcmlhLWV4cGFuZGVkPVwidHJ1ZVwiPlxuICAgICAgICAgICAgW1tjYWxlbmRhcjpyZXNwb25zZV9tYXliZV1dXG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWNoZXZyb24tZG93biBwdWxsLXJpZ2h0XCI+PC9pPlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbC1jb2xsYXBzZVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbC1ib2R5XCI+XG4gICAgICAgICAgICA8dWwgY2xhc3M9XCJwbHVnaW4tY2FsZW5kYXItZXZlbnQtcmVzcG9uc2VzLWxpc3QtbWF5YmVcIj5cbiAgICAgICAgICAgICAgPCEtLSBtYXliZSByZXNwb25zZXMgZ28gaGVyZSAtLT5cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwicGFuZWwgcGFuZWwtZGVmYXVsdCBjbG9zZWRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsLWhlYWRpbmdcIj5cbiAgICAgICAgICA8YSByb2xlPVwiYnV0dG9uXCIgZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiIGhyZWY9XCIjXCJcbiAgICAgICAgICBjbGFzcz1cImJ0biBidG4tc20gYnRuLXdhcm5pbmdcIiBhcmlhLWV4cGFuZGVkPVwidHJ1ZVwiPlxuICAgICAgICAgICAgW1tjYWxlbmRhcjpyZXNwb25zZV9ub11dXG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWNoZXZyb24tZG93biBwdWxsLXJpZ2h0XCI+PC9pPlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbC1jb2xsYXBzZVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbC1ib2R5XCI+XG4gICAgICAgICAgICA8dWwgY2xhc3M9XCJwbHVnaW4tY2FsZW5kYXItZXZlbnQtcmVzcG9uc2VzLWxpc3Qtbm9cIj5cbiAgICAgICAgICAgICAgPCEtLSBubyByZXNwb25zZXMgZ28gaGVyZSAtLT5cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9kaXY+YDtcblxuICBjb25zdCBodG1sID0gYFxuPGRpdiBjbGFzcz1cInBsdWdpbi1jYWxlbmRhci1ldmVudCBwYW5lbCBwYW5lbC1zdWNjZXNzXCI+XG4gIDxkaXYgY2xhc3M9XCJwbHVnaW4tY2FsZW5kYXItZXZlbnQtbmFtZSBwYW5lbC1oZWFkaW5nXCI+XG4gICAgJHtldmVudC5uYW1lfVxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz1cInBhbmVsLWJvZHlcIj5cbiAgICA8ZGl2IGNsYXNzPVwicGx1Z2luLWNhbGVuZGFyLWV2ZW50LWRhdGVcIj5cbiAgICAgIDxpIGNsYXNzPVwiZmEgZmEtY2xvY2stb1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgIDxhXG4gICAgICAgIGRhdGEtcGFyc2VkPVwiZmFsc2VcIlxuICAgICAgICBkYXRhLWFsbGRheT1cIiR7ZXZlbnQuYWxsZGF5fVwiXG4gICAgICAgIGRhdGEtc3RhcnREYXRlPVwiJHtldmVudC5zdGFydERhdGV9XCJcbiAgICAgICAgZGF0YS1lbmREYXRlPVwiJHtldmVudC5lbmREYXRlfVwiXG4gICAgICAgIHRpdGxlPVwiJHtkYXRlU3RyaW5nVVRDfVwiXG4gICAgICAgIGRhdGEtb3JpZ2luYWwtdGl0bGU9XCIke2RhdGVTdHJpbmdVVEN9XCJcbiAgICAgICAgY2xhc3M9XCJwbHVnaW4tY2FsZW5kYXItdGltZS1kYXRlLXZpZXdcIlxuICAgICAgPkhvdmVyIGZvciBVVEMgZGF0ZTwvYT5cbiAgICA8L2Rpdj5cbiAgICAke2V2ZW50LmxvY2F0aW9uLmxlbmd0aCA/IGBcbiAgICA8ZGl2IGNsYXNzPVwicGx1Z2luLWNhbGVuZGFyLWV2ZW50LWxvY2F0aW9uXCI+XG4gICAgICA8aSBjbGFzcz1cImZhIGZhLWxvY2F0aW9uLWFycm93XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxuICAgICAgPHNwYW4+JHtldmVudC5sb2NhdGlvbn08c3Bhbj5cbiAgICA8L2Rpdj5cbiAgICBgIDogJyd9XG4gICAgJHtldmVudC5kZXNjcmlwdGlvbi5sZW5ndGggPyBgXG4gICAgPGRpdiBjbGFzcz1cInBsdWdpbi1jYWxlbmRhci1ldmVudC1kZXNjcmlwdGlvblwiPlxuICAgICAgPGkgY2xhc3M9XCJmYSBmYS1pbmZvLWNpcmNsZVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgIDxkaXY+JHtldmVudC5kZXNjcmlwdGlvbn08L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICBgIDogJyd9XG4gICAgJHtldmVudC5yZW1pbmRlcnMubGVuZ3RoID8gYFxuICAgIDxkaXYgY2xhc3M9XCJwbHVnaW4tY2FsZW5kYXItZXZlbnQtcmVtaW5kZXJzXCI+XG4gICAgICA8aSBjbGFzcz1cImZhIGZhLWJlbGxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG4gICAgICA8dWw+XG4gICAgICAgICR7ZXZlbnQucmVtaW5kZXJzXG4gICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEgLSBiKVxuICAgICAgICAgIC5tYXAobWFrZUxpc3RFbGVtZW50KS5qb2luKCdcXG4nKX1cbiAgICAgIDwvdWw+XG4gICAgPC9kaXY+XG4gICAgYCA6ICcnfVxuICAgICR7cmVzcG9uc2VzVGVtcGxhdGV9XG4gIDwvZGl2PlxuPC9kaXY+YC50cmltKCk7XG5cbiAgcmV0dXJuIGh0bWw7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBwb3N0VGVtcGxhdGU7XG4vLyBleHBvcnQgeyBmb3JtYXREYXRlcyB9O1xuIl19