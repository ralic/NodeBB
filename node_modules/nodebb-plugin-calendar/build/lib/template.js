'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.formatDates = undefined;

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _moment = require('moment');

var _moment2 = _interopRequireDefault(_moment);

var _intl = require('intl');

var _intl2 = _interopRequireDefault(_intl);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

Intl.NumberFormat = _intl2.default.NumberFormat;
Intl.DateTimeFormat = _intl2.default.DateTimeFormat;

const stringOptions = {
  date: {
    weekday: 'long',
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  },
  time: {
    hour: 'numeric',
    minute: 'numeric'
  },
  full: {}
};

stringOptions.full = (0, _extends3.default)({}, stringOptions.date, stringOptions.time);

stringOptions.UTC = Object.keys(stringOptions).reduce((utc, key) => (0, _extends3.default)({}, utc, {
  [key]: (0, _extends3.default)({}, stringOptions[key], {
    timeZone: 'UTC',
    timeZoneName: 'short'
  })
}), {});

const formatDates = (s, e, allday, lang, utc) => {
  const start = new Date(s);
  const end = new Date(e);

  const options = utc ? stringOptions.UTC : stringOptions;

  if (Math.abs(s - e) <= 60 * 1000) {
    if (allday) {
      return start.toLocaleDateString(lang, options.date);
    }
    return start.toLocaleString(lang, options.full);
  }

  if (start.getDate() === end.getDate() && start.getMonth() === end.getMonth() && start.getYear() === end.getYear()) {
    if (allday) {
      return start.toLocaleDateString(lang, options.date);
    }
    return `${ start.toLocaleDateString(lang, options.date) }<br>` + `${ start.toLocaleTimeString(lang, options.time) }` + ` - ${ end.toLocaleTimeString(lang, options.time) }`;
  }

  if (allday) {
    return `${ start.toLocaleDateString(lang, options.date) }` + ` - ${ end.toLocaleDateString(lang, options.date) }`;
  }
  return `${ start.toLocaleString(lang, options.full) } - ` + `${ end.toLocaleString(lang, options.full) }`;
};

const zero = (0, _moment2.default)(0);

const makeListElement = n => {
  const li = `<li data-value="${ n }">${ zero.to(n, true) }</li>`;
  return li;
};

const postTemplate = (event, lang) => {
  // const dateString = formatDates(
  //   event.startDate,
  //   event.endDate,
  //   event.allday,
  //   lang
  // );
  const dateStringUTC = formatDates(event.startDate, event.endDate, event.allday, lang, true).replace('<br>', ' | ');

  const responsesTemplate = `
<div class="plugin-calendar-event-responses">
  <i class="fa fa-reply" aria-hidden="true"></i>
  <div>
    <div class="plugin-calendar-event-responses-user btn-group">
      <button data-value="no" type="button" class="btn btn-sm btn-danger">
        [[calendar:response_no]]
      </button>
      <button data-value="maybe" type="button" class="btn btn-sm btn-default">
        [[calendar:response_maybe]]
      </button>
      <button data-value="yes" type="button" class="btn btn-sm btn-success">
        [[calendar:response_yes]]
      </button>
    </div>
    <div class="panel-group plugin-calendar-event-responses-lists" data-loaded="false">
      <div class="panel panel-default closed">
        <div class="panel-heading">
          <a role="button" data-toggle="collapse" href="#"
          class="btn btn-sm btn-info" aria-expanded="true">
            <i class="fa fa-chevron-down pull-right"></i>
            [[calendar:response_yes]]
          </a>
        </div>
        <div class="panel-collapse">
          <div class="panel-body">
            <ul class="plugin-calendar-event-responses-list-yes">
              <!-- yes responses go here -->
            </ul>
          </div>
        </div>
      </div>
      <div class="panel panel-default closed">
        <div class="panel-heading">
          <a role="button" data-toggle="collapse" href="#"
          class="btn btn-sm btn-link" aria-expanded="true">
            <i class="fa fa-chevron-down pull-right"></i>
            [[calendar:response_maybe]]
          </a>
        </div>
        <div class="panel-collapse">
          <div class="panel-body">
            <ul class="plugin-calendar-event-responses-list-maybe">
              <!-- maybe responses go here -->
            </ul>
          </div>
        </div>
      </div>
      <div class="panel panel-default closed">
        <div class="panel-heading">
          <a role="button" data-toggle="collapse" href="#"
          class="btn btn-sm btn-warning" aria-expanded="true">
            <i class="fa fa-chevron-down pull-right"></i>
            [[calendar:response_no]]
          </a>
        </div>
        <div class="panel-collapse">
          <div class="panel-body">
            <ul class="plugin-calendar-event-responses-list-no">
              <!-- no responses go here -->
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>`;

  const html = `
<div class="plugin-calendar-event panel panel-success">
  <div class="plugin-calendar-event-name panel-heading">
    ${ event.name }
  </div>
  <div class="panel-body">
    <div class="plugin-calendar-event-date">
      <i class="fa fa-clock-o" aria-hidden="true"></i>
      <a
        data-parsed="false"
        data-allday="${ event.allday }"
        data-startDate="${ event.startDate }"
        data-endDate="${ event.endDate }"
        title="${ dateStringUTC }"
        data-original-title="${ dateStringUTC }"
        class="plugin-calendar-time-date-view"
      >Hover for UTC date</a>
    </div>
    ${ event.location.length ? `
    <div class="plugin-calendar-event-location">
      <i class="fa fa-location-arrow" aria-hidden="true"></i>
      <span>${ event.location }<span>
    </div>
    ` : '' }
    ${ event.description.length ? `
    <div class="plugin-calendar-event-description">
      <i class="fa fa-info-circle" aria-hidden="true"></i>
      <div>${ event.description }</div>
    </div>
    ` : '' }
    ${ event.reminders.length ? `
    <div class="plugin-calendar-event-reminders">
      <i class="fa fa-bell" aria-hidden="true"></i>
      <ul>
        ${ event.reminders.sort((a, b) => a - b).map(makeListElement).join('\n') }
      </ul>
    </div>
    ` : '' }
    ${ responsesTemplate }
  </div>
</div>`.trim();

  return html;
};

exports.default = postTemplate;
exports.formatDates = formatDates;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvdGVtcGxhdGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7Ozs7QUFDQSxLQUFLLFlBQUwsR0FBb0IsZUFBYSxZQUFqQztBQUNBLEtBQUssY0FBTCxHQUFzQixlQUFhLGNBQW5DOztBQUVBLE1BQU0sZ0JBQWdCO0FBQ3BCLFFBQU07QUFDSixhQUFTLE1BREw7QUFFSixVQUFNLFNBRkY7QUFHSixXQUFPLE1BSEg7QUFJSixTQUFLO0FBSkQsR0FEYztBQU9wQixRQUFNO0FBQ0osVUFBTSxTQURGO0FBRUosWUFBUTtBQUZKLEdBUGM7QUFXcEIsUUFBTTtBQVhjLENBQXRCOztBQWNBLGNBQWMsSUFBZCw4QkFDSyxjQUFjLElBRG5CLEVBRUssY0FBYyxJQUZuQjs7QUFLQSxjQUFjLEdBQWQsR0FBb0IsT0FBTyxJQUFQLENBQVksYUFBWixFQUEyQixNQUEzQixDQUFrQyxDQUFDLEdBQUQsRUFBTSxHQUFOLGdDQUNqRCxHQURpRDtBQUVwRCxHQUFDLEdBQUQsOEJBQ0ssY0FBYyxHQUFkLENBREw7QUFFRSxjQUFVLEtBRlo7QUFHRSxrQkFBYztBQUhoQjtBQUZvRCxFQUFsQyxFQU9oQixFQVBnQixDQUFwQjs7QUFTQSxNQUFNLGNBQWMsQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLE1BQVAsRUFBZSxJQUFmLEVBQXFCLEdBQXJCLEtBQTZCO0FBQy9DLFFBQU0sUUFBUSxJQUFJLElBQUosQ0FBUyxDQUFULENBQWQ7QUFDQSxRQUFNLE1BQU0sSUFBSSxJQUFKLENBQVMsQ0FBVCxDQUFaOztBQUVBLFFBQU0sVUFBVSxNQUFNLGNBQWMsR0FBcEIsR0FBMEIsYUFBMUM7O0FBRUEsTUFBSSxLQUFLLEdBQUwsQ0FBUyxJQUFJLENBQWIsS0FBbUIsS0FBSyxJQUE1QixFQUFrQztBQUNoQyxRQUFJLE1BQUosRUFBWTtBQUNWLGFBQU8sTUFBTSxrQkFBTixDQUF5QixJQUF6QixFQUErQixRQUFRLElBQXZD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b3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IEludGxQb2x5ZmlsbCBmcm9tICdpbnRsJztcbkludGwuTnVtYmVyRm9ybWF0ID0gSW50bFBvbHlmaWxsLk51bWJlckZvcm1hdDtcbkludGwuRGF0ZVRpbWVGb3JtYXQgPSBJbnRsUG9seWZpbGwuRGF0ZVRpbWVGb3JtYXQ7XG5cbmNvbnN0IHN0cmluZ09wdGlvbnMgPSB7XG4gIGRhdGU6IHtcbiAgICB3ZWVrZGF5OiAnbG9uZycsXG4gICAgeWVhcjogJ251bWVyaWMnLFxuICAgIG1vbnRoOiAnbG9uZycsXG4gICAgZGF5OiAnbnVtZXJpYycsXG4gIH0sXG4gIHRpbWU6IHtcbiAgICBob3VyOiAnbnVtZXJpYycsXG4gICAgbWludXRlOiAnbnVtZXJpYycsXG4gIH0sXG4gIGZ1bGw6IHt9LFxufTtcblxuc3RyaW5nT3B0aW9ucy5mdWxsID0ge1xuICAuLi5zdHJpbmdPcHRpb25zLmRhdGUsXG4gIC4uLnN0cmluZ09wdGlvbnMudGltZSxcbn07XG5cbnN0cmluZ09wdGlvbnMuVVRDID0gT2JqZWN0LmtleXMoc3RyaW5nT3B0aW9ucykucmVkdWNlKCh1dGMsIGtleSkgPT4gKHtcbiAgLi4udXRjLFxuICBba2V5XToge1xuICAgIC4uLnN0cmluZ09wdGlvbnNba2V5XSxcbiAgICB0aW1lWm9uZTogJ1VUQycsXG4gICAgdGltZVpvbmVOYW1lOiAnc2hvcnQnLFxuICB9LFxufSksIHt9KTtcblxuY29uc3QgZm9ybWF0RGF0ZXMgPSAocywgZSwgYWxsZGF5LCBsYW5nLCB1dGMpID0+IHtcbiAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZShzKTtcbiAgY29uc3QgZW5kID0gbmV3IERhdGUoZSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IHV0YyA/IHN0cmluZ09wdGlvbnMuVVRDIDogc3RyaW5nT3B0aW9ucztcblxuICBpZiAoTWF0aC5hYnMocyAtIGUpIDw9IDYwICogMTAwMCkge1xuICAgIGlmIChhbGxkYXkpIHtcbiAgICAgIHJldHVybiBzdGFydC50b0xvY2FsZURhdGVTdHJpbmcobGFuZywgb3B0aW9ucy5kYXRlKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0LnRvTG9jYWxlU3RyaW5nKGxhbmcsIG9wdGlvbnMuZnVsbCk7XG4gIH1cblxuICBpZiAoXG4gICAgc3RhcnQuZ2V0RGF0ZSgpID09PSBlbmQuZ2V0RGF0ZSgpICYmXG4gICAgc3RhcnQuZ2V0TW9udGgoKSA9PT0gZW5kLmdldE1vbnRoKCkgJiZcbiAgICBzdGFydC5nZXRZZWFyKCkgPT09IGVuZC5nZXRZZWFyKClcbiAgKSB7XG4gICAgaWYgKGFsbGRheSkge1xuICAgICAgcmV0dXJuIHN0YXJ0LnRvTG9jYWxlRGF0ZVN0cmluZyhsYW5nLCBvcHRpb25zLmRhdGUpO1xuICAgIH1cbiAgICByZXR1cm4gYCR7c3RhcnQudG9Mb2NhbGVEYXRlU3RyaW5nKGxhbmcsIG9wdGlvbnMuZGF0ZSl9PGJyPmAgK1xuICAgICAgYCR7c3RhcnQudG9Mb2NhbGVUaW1lU3RyaW5nKGxhbmcsIG9wdGlvbnMudGltZSl9YCArXG4gICAgICBgIC0gJHtlbmQudG9Mb2NhbGVUaW1lU3RyaW5nKGxhbmcsIG9wdGlvbnMudGltZSl9YDtcbiAgfVxuXG4gIGlmIChhbGxkYXkpIHtcbiAgICByZXR1cm4gYCR7c3RhcnQudG9Mb2NhbGVEYXRlU3RyaW5nKGxhbmcsIG9wdGlvbnMuZGF0ZSl9YCArXG4gICAgICBgIC0gJHtlbmQudG9Mb2NhbGVEYXRlU3RyaW5nKGxhbmcsIG9wdGlvbnMuZGF0ZSl9YDtcbiAgfVxuICByZXR1cm4gYCR7c3RhcnQudG9Mb2NhbGVTdHJpbmcobGFuZywgb3B0aW9ucy5mdWxsKX0gLSBgICtcbiAgICBgJHtlbmQudG9Mb2NhbGVTdHJpbmcobGFuZywgb3B0aW9ucy5mdWxsKX1gO1xufTtcblxuY29uc3QgemVybyA9IG1vbWVudCgwKTtcblxuY29uc3QgbWFrZUxpc3RFbGVtZW50ID0gbiA9PiB7XG4gIGNvbnN0IGxpID0gYDxsaSBkYXRhLXZhbHVlPVwiJHtufVwiPiR7emVyby50byhuLCB0cnVlKX08L2xpPmA7XG4gIHJldHVybiBsaTtcbn07XG5cbmNvbnN0IHBvc3RUZW1wbGF0ZSA9IChldmVudCwgbGFuZykgPT4ge1xuICAvLyBjb25zdCBkYXRlU3RyaW5nID0gZm9ybWF0RGF0ZXMoXG4gIC8vICAgZXZlbnQuc3RhcnREYXRlLFxuICAvLyAgIGV2ZW50LmVuZERhdGUsXG4gIC8vICAgZXZlbnQuYWxsZGF5LFxuICAvLyAgIGxhbmdcbiAgLy8gKTtcbiAgY29uc3QgZGF0ZVN0cmluZ1VUQyA9IGZvcm1hdERhdGVzKFxuICAgIGV2ZW50LnN0YXJ0RGF0ZSxcbiAgICBldmVudC5lbmREYXRlLFxuICAgIGV2ZW50LmFsbGRheSxcbiAgICBsYW5nLFxuICAgIHRydWVcbiAgKS5yZXBsYWNlKCc8YnI+JywgJyB8ICcpO1xuXG4gIGNvbnN0IHJlc3BvbnNlc1RlbXBsYXRlID0gYFxuPGRpdiBjbGFzcz1cInBsdWdpbi1jYWxlbmRhci1ldmVudC1yZXNwb25zZXNcIj5cbiAgPGkgY2xhc3M9XCJmYSBmYS1yZXBseVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgPGRpdj5cbiAgICA8ZGl2IGNsYXNzPVwicGx1Z2luLWNhbGVuZGFyLWV2ZW50LXJlc3BvbnNlcy11c2VyIGJ0bi1ncm91cFwiPlxuICAgICAgPGJ1dHRvbiBkYXRhLXZhbHVlPVwibm9cIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXNtIGJ0bi1kYW5nZXJcIj5cbiAgICAgICAgW1tjYWxlbmRhcjpyZXNwb25zZV9ub11dXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxidXR0b24gZGF0YS12YWx1ZT1cIm1heWJlXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwiPlxuICAgICAgICBbW2NhbGVuZGFyOnJlc3BvbnNlX21heWJlXV1cbiAgICAgIDwvYnV0dG9uPlxuICAgICAgPGJ1dHRvbiBkYXRhLXZhbHVlPVwieWVzXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tc3VjY2Vzc1wiPlxuICAgICAgICBbW2NhbGVuZGFyOnJlc3BvbnNlX3llc11dXG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwicGFuZWwtZ3JvdXAgcGx1Z2luLWNhbGVuZGFyLWV2ZW50LXJlc3BvbnNlcy1saXN0c1wiIGRhdGEtbG9hZGVkPVwiZmFsc2VcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbCBwYW5lbC1kZWZhdWx0IGNsb3NlZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWwtaGVhZGluZ1wiPlxuICAgICAgICAgIDxhIHJvbGU9XCJidXR0b25cIiBkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCIgaHJlZj1cIiNcIlxuICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4taW5mb1wiIGFyaWEtZXhwYW5kZWQ9XCJ0cnVlXCI+XG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWNoZXZyb24tZG93biBwdWxsLXJpZ2h0XCI+PC9pPlxuICAgICAgICAgICAgW1tjYWxlbmRhcjpyZXNwb25zZV95ZXNdXVxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbC1jb2xsYXBzZVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbC1ib2R5XCI+XG4gICAgICAgICAgICA8dWwgY2xhc3M9XCJwbHVnaW4tY2FsZW5kYXItZXZlbnQtcmVzcG9uc2VzLWxpc3QteWVzXCI+XG4gICAgICAgICAgICAgIDwhLS0geWVzIHJlc3BvbnNlcyBnbyBoZXJlIC0tPlxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbCBwYW5lbC1kZWZhdWx0IGNsb3NlZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWwtaGVhZGluZ1wiPlxuICAgICAgICAgIDxhIHJvbGU9XCJidXR0b25cIiBkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCIgaHJlZj1cIiNcIlxuICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tbGlua1wiIGFyaWEtZXhwYW5kZWQ9XCJ0cnVlXCI+XG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWNoZXZyb24tZG93biBwdWxsLXJpZ2h0XCI+PC9pPlxuICAgICAgICAgICAgW1tjYWxlbmRhcjpyZXNwb25zZV9tYXliZV1dXG4gICAgICAgICAgPC9hPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsLWNvbGxhcHNlXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsLWJvZHlcIj5cbiAgICAgICAgICAgIDx1bCBjbGFzcz1cInBsdWdpbi1jYWxlbmRhci1ldmVudC1yZXNwb25zZXMtbGlzdC1tYXliZVwiPlxuICAgICAgICAgICAgICA8IS0tIG1heWJlIHJlc3BvbnNlcyBnbyBoZXJlIC0tPlxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbCBwYW5lbC1kZWZhdWx0IGNsb3NlZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWwtaGVhZGluZ1wiPlxuICAgICAgICAgIDxhIHJvbGU9XCJidXR0b25cIiBkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCIgaHJlZj1cIiNcIlxuICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4td2FybmluZ1wiIGFyaWEtZXhwYW5kZWQ9XCJ0cnVlXCI+XG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWNoZXZyb24tZG93biBwdWxsLXJpZ2h0XCI+PC9pPlxuICAgICAgICAgICAgW1tjYWxlbmRhcjpyZXNwb25zZV9ub11dXG4gICAgICAgICAgPC9hPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsLWNvbGxhcHNlXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsLWJvZHlcIj5cbiAgICAgICAgICAgIDx1bCBjbGFzcz1cInBsdWdpbi1jYWxlbmRhci1ldmVudC1yZXNwb25zZXMtbGlzdC1ub1wiPlxuICAgICAgICAgICAgICA8IS0tIG5vIHJlc3BvbnNlcyBnbyBoZXJlIC0tPlxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5gO1xuXG4gIGNvbnN0IGh0bWwgPSBgXG48ZGl2IGNsYXNzPVwicGx1Z2luLWNhbGVuZGFyLWV2ZW50IHBhbmVsIHBhbmVsLXN1Y2Nlc3NcIj5cbiAgPGRpdiBjbGFzcz1cInBsdWdpbi1jYWxlbmRhci1ldmVudC1uYW1lIHBhbmVsLWhlYWRpbmdcIj5cbiAgICAke2V2ZW50Lm5hbWV9XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPVwicGFuZWwtYm9keVwiPlxuICAgIDxkaXYgY2xhc3M9XCJwbHVnaW4tY2FsZW5kYXItZXZlbnQtZGF0ZVwiPlxuICAgICAgPGkgY2xhc3M9XCJmYSBmYS1jbG9jay1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxuICAgICAgPGFcbiAgICAgICAgZGF0YS1wYXJzZWQ9XCJmYWxzZVwiXG4gICAgICAgIGRhdGEtYWxsZGF5PVwiJHtldmVudC5hbGxkYXl9XCJcbiAgICAgICAgZGF0YS1zdGFydERhdGU9XCIke2V2ZW50LnN0YXJ0RGF0ZX1cIlxuICAgICAgICBkYXRhLWVuZERhdGU9XCIke2V2ZW50LmVuZERhdGV9XCJcbiAgICAgICAgdGl0bGU9XCIke2RhdGVTdHJpbmdVVEN9XCJcbiAgICAgICAgZGF0YS1vcmlnaW5hbC10aXRsZT1cIiR7ZGF0ZVN0cmluZ1VUQ31cIlxuICAgICAgICBjbGFzcz1cInBsdWdpbi1jYWxlbmRhci10aW1lLWRhdGUtdmlld1wiXG4gICAgICA+SG92ZXIgZm9yIFVUQyBkYXRlPC9hPlxuICAgIDwvZGl2PlxuICAgICR7ZXZlbnQubG9jYXRpb24ubGVuZ3RoID8gYFxuICAgIDxkaXYgY2xhc3M9XCJwbHVnaW4tY2FsZW5kYXItZXZlbnQtbG9jYXRpb25cIj5cbiAgICAgIDxpIGNsYXNzPVwiZmEgZmEtbG9jYXRpb24tYXJyb3dcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG4gICAgICA8c3Bhbj4ke2V2ZW50LmxvY2F0aW9ufTxzcGFuPlxuICAgIDwvZGl2PlxuICAgIGAgOiAnJ31cbiAgICAke2V2ZW50LmRlc2NyaXB0aW9uLmxlbmd0aCA/IGBcbiAgICA8ZGl2IGNsYXNzPVwicGx1Z2luLWNhbGVuZGFyLWV2ZW50LWRlc2NyaXB0aW9uXCI+XG4gICAgICA8aSBjbGFzcz1cImZhIGZhLWluZm8tY2lyY2xlXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxuICAgICAgPGRpdj4ke2V2ZW50LmRlc2NyaXB0aW9ufTwvZGl2PlxuICAgIDwvZGl2PlxuICAgIGAgOiAnJ31cbiAgICAke2V2ZW50LnJlbWluZGVycy5sZW5ndGggPyBgXG4gICAgPGRpdiBjbGFzcz1cInBsdWdpbi1jYWxlbmRhci1ldmVudC1yZW1pbmRlcnNcIj5cbiAgICAgIDxpIGNsYXNzPVwiZmEgZmEtYmVsbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgIDx1bD5cbiAgICAgICAgJHtldmVudC5yZW1pbmRlcnNcbiAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYSAtIGIpXG4gICAgICAgICAgLm1hcChtYWtlTGlzdEVsZW1lbnQpLmpvaW4oJ1xcbicpfVxuICAgICAgPC91bD5cbiAgICA8L2Rpdj5cbiAgICBgIDogJyd9XG4gICAgJHtyZXNwb25zZXNUZW1wbGF0ZX1cbiAgPC9kaXY+XG48L2Rpdj5gLnRyaW0oKTtcblxuICByZXR1cm4gaHRtbDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHBvc3RUZW1wbGF0ZTtcbmV4cG9ydCB7IGZvcm1hdERhdGVzIH07XG4iXX0=