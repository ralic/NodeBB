'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.postDelete = exports.composerFormatting = exports.postEdit = exports.privilegesListHuman = exports.privilegesGroupsList = exports.privilegesList = exports.postSave = exports.parseRaw = exports.parsePost = exports.adminMenu = exports.addNavigation = exports.init = undefined;

var _init = require('./init');

var _init2 = _interopRequireDefault(_init);

var _parseFilters = require('./parseFilters');

var _postSave = require('./postSave');

var _privileges = require('./privileges');

var _event = require('./event');

require('./sockets');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// TODO: repeating events

const addNavigation = (navs, callback) => {
  navs.push({
    route: '/calendar',
    title: '\\[\\[calendar:calendar\\]\\]',
    iconClass: 'fa-calendar',
    textClass: 'visible-xs-inline',
    text: '\\[\\[calendar:calendar\\]\\]'
  });
  callback(null, navs);
};
const adminMenu = (header, callback) => {
  header.plugins.push({
    route: '/plugins/calendar',
    icon: 'fa-calendar',
    name: 'Calendar'
  });
  callback(null, header);
};

const composerFormatting = (data, callback) => {
  data.options.push({
    name: 'plugin-calendar-event',
    className: 'fa fa-calendar-o plugin-calendar-composer-edit-event',
    title: '[[calendar:edit_event]]'
  });
  callback(null, data);
};

const postDelete = (pid, cb) => (0, _event.deleteEvent)(pid).asCallback(cb);

exports.init = _init2.default;
exports.addNavigation = addNavigation;
exports.adminMenu = adminMenu;
exports.parsePost = _parseFilters.parsePostCallback;
exports.parseRaw = _parseFilters.parseRawCallback;
exports.postSave = _postSave.postSaveCallback;
exports.privilegesList = _privileges.privilegesList;
exports.privilegesGroupsList = _privileges.privilegesGroupsList;
exports.privilegesListHuman = _privileges.privilegesListHuman;
exports.postEdit = _postSave.postEditCallback;
exports.composerFormatting = composerFormatting;
exports.postDelete = postDelete;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7OztBQUlBLE1BQU0sZ0JBQWdCLENBQUMsSUFBRCxFQUFPLFFBQVAsS0FBb0I7QUFDeEMsT0FBSyxJQUFMLENBQVU7QUFDUixXQUFPLFdBREM7QUFFUixXQUFPLCtCQUZDO0FBR1IsZUFBVyxhQUhIO0FBSVIsZUFBVyxtQkFKSDtBQUtSLFVBQU07QUFMRSxHQUFWO0FBT0EsV0FBUyxJQUFULEVBQWUsSUFBZjtBQUNELENBVEQ7QUFVQSxNQUFNLFlBQVksQ0FBQyxNQUFELEVBQVMsUUFBVCxLQUFzQjtBQUN0QyxTQUFPLE9BQVAsQ0FBZSxJQUFmLENBQW9CO0FBQ2xCLFdBQU8sbUJBRFc7QUFFbEIsVUFBTSxhQUZZO0FBR2xCLFVBQU07QUFIWSxHQUFwQjtBQUtBLFdBQVMsSUFBVCxFQUFlLE1BQWY7QUFDRCxDQVBEOztBQVNBLE1BQU0scUJBQXFCLENBQUMsSUFBRCxFQUFPLFFBQVAsS0FBb0I7QUFDN0MsT0FBSyxPQUFMLENBQWEsSUFBYixDQUFrQjtBQUNoQixVQUFNLHVCQURVO0FBRWhCLGVBQVcsc0RBRks7QUFHaEIsV0FBTztBQUhTLEdBQWxCO0FBS0EsV0FBUyxJQUFULEVBQWUsSUFBZjtBQUNELENBUEQ7O0FBU0EsTUFBTSxhQUFhLENBQUMsR0FBRCxFQUFNLEVBQU4sS0FBYSx3QkFBWSxHQUFaLEVBQWlCLFVBQWpCLENBQTRCLEVBQTVCLENBQWhDOztRQUdFLEk7UUFDQSxhLEdBQUEsYTtRQUNBLFMsR0FBQSxTO1FBQ3FCLFM7UUFDRCxRO1FBQ0EsUTtRQUNwQixjO1FBQ0Esb0I7UUFDQSxtQjtRQUNvQixRO1FBQ3BCLGtCLEdBQUEsa0I7UUFDQSxVLEdBQUEsVSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBpbml0IGZyb20gJy4vaW5pdCc7XG5pbXBvcnQgeyBwYXJzZVBvc3RDYWxsYmFjaywgcGFyc2VSYXdDYWxsYmFjayB9IGZyb20gJy4vcGFyc2VGaWx0ZXJzJztcbmltcG9ydCB7IHBvc3RTYXZlQ2FsbGJhY2ssIHBvc3RFZGl0Q2FsbGJhY2sgfSBmcm9tICcuL3Bvc3RTYXZlJztcbmltcG9ydCB7IHByaXZpbGVnZXNMaXN0LCBwcml2aWxlZ2VzR3JvdXBzTGlzdCwgcHJpdmlsZWdlc0xpc3RIdW1hbiB9IGZyb20gJy4vcHJpdmlsZWdlcyc7XG5pbXBvcnQgeyBkZWxldGVFdmVudCB9IGZyb20gJy4vZXZlbnQnO1xuaW1wb3J0ICcuL3NvY2tldHMnO1xuXG4vLyBUT0RPOiByZXBlYXRpbmcgZXZlbnRzXG5cbmNvbnN0IGFkZE5hdmlnYXRpb24gPSAobmF2cywgY2FsbGJhY2spID0+IHtcbiAgbmF2cy5wdXNoKHtcbiAgICByb3V0ZTogJy9jYWxlbmRhcicsXG4gICAgdGl0bGU6ICdcXFxcW1xcXFxbY2FsZW5kYXI6Y2FsZW5kYXJcXFxcXVxcXFxdJyxcbiAgICBpY29uQ2xhc3M6ICdmYS1jYWxlbmRhcicsXG4gICAgdGV4dENsYXNzOiAndmlzaWJsZS14cy1pbmxpbmUnLFxuICAgIHRleHQ6ICdcXFxcW1xcXFxbY2FsZW5kYXI6Y2FsZW5kYXJcXFxcXVxcXFxdJyxcbiAgfSk7XG4gIGNhbGxiYWNrKG51bGwsIG5hdnMpO1xufTtcbmNvbnN0IGFkbWluTWVudSA9IChoZWFkZXIsIGNhbGxiYWNrKSA9PiB7XG4gIGhlYWRlci5wbHVnaW5zLnB1c2goe1xuICAgIHJvdXRlOiAnL3BsdWdpbnMvY2FsZW5kYXInLFxuICAgIGljb246ICdmYS1jYWxlbmRhcicsXG4gICAgbmFtZTogJ0NhbGVuZGFyJyxcbiAgfSk7XG4gIGNhbGxiYWNrKG51bGwsIGhlYWRlcik7XG59O1xuXG5jb25zdCBjb21wb3NlckZvcm1hdHRpbmcgPSAoZGF0YSwgY2FsbGJhY2spID0+IHtcbiAgZGF0YS5vcHRpb25zLnB1c2goe1xuICAgIG5hbWU6ICdwbHVnaW4tY2FsZW5kYXItZXZlbnQnLFxuICAgIGNsYXNzTmFtZTogJ2ZhIGZhLWNhbGVuZGFyLW8gcGx1Z2luLWNhbGVuZGFyLWNvbXBvc2VyLWVkaXQtZXZlbnQnLFxuICAgIHRpdGxlOiAnW1tjYWxlbmRhcjplZGl0X2V2ZW50XV0nLFxuICB9KTtcbiAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG59O1xuXG5jb25zdCBwb3N0RGVsZXRlID0gKHBpZCwgY2IpID0+IGRlbGV0ZUV2ZW50KHBpZCkuYXNDYWxsYmFjayhjYik7XG5cbmV4cG9ydCB7XG4gIGluaXQsXG4gIGFkZE5hdmlnYXRpb24sXG4gIGFkbWluTWVudSxcbiAgcGFyc2VQb3N0Q2FsbGJhY2sgYXMgcGFyc2VQb3N0LFxuICBwYXJzZVJhd0NhbGxiYWNrIGFzIHBhcnNlUmF3LFxuICBwb3N0U2F2ZUNhbGxiYWNrIGFzIHBvc3RTYXZlLFxuICBwcml2aWxlZ2VzTGlzdCxcbiAgcHJpdmlsZWdlc0dyb3Vwc0xpc3QsXG4gIHByaXZpbGVnZXNMaXN0SHVtYW4sXG4gIHBvc3RFZGl0Q2FsbGJhY2sgYXMgcG9zdEVkaXQsXG4gIGNvbXBvc2VyRm9ybWF0dGluZyxcbiAgcG9zdERlbGV0ZSxcbn07XG4iXX0=